@using MicroSocialPlatform.Helpers
@model MicroSocialPlatform.Models.ApplicationUser

@{
    var size = ViewBag.Size ?? 40;
    var showName = ViewBag.ShowName ?? false;
    var cssClass = ViewBag.CssClass ?? "";
}

<div class="user-avatar-container d-inline-flex align-items-center @cssClass">
    @if (!string.IsNullOrEmpty(Model?.ProfilePicture))
    {
        <img src="@Model.ProfilePicture"
             alt="@Model.FullName"
             class="rounded-circle"
             style="width: @(size)px; height: @(size)px; object-fit: cover; border: 2px solid #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1);" />
    }
    else
    {
        <div class="rounded-circle d-flex align-items-center justify-content-center text-white fw-bold"
             style="width: @(size)px; height: @(size)px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: 2px solid #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.1); font-size: @(size / 2)px;">
            @AvatarHelper.GetInitials(Model?.FullName)
        </div>
    }

    @if (showName && Model != null)
    {
        <span class="ms-2 text-dark fw-semibold">@Model.FullName</span>
    }
</div>